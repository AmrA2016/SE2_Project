package com.se_project.controllers.services;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.se_project.models.Game;
import com.se_project.models.GameCollaborator;
import com.se_project.models.Teacher;
import com.se_project.repositories.GameCollaboratorRepository;

@Service
public class GameCollaboratorService {
	
	@Autowired
	GameCollaboratorRepository gameCollaboratorRepo;
	
	@Autowired
	TeacherRepositoryService teacherRepoService;
	
	public void add_owner(long gid,String teacher_id){
		GameCollaborator gameCollaborator = new GameCollaborator();
		Teacher teacher = new Teacher(teacher_id);
		Game game = new Game(gid);
		
		gameCollaborator.setGame(game);
		gameCollaborator.setTeacher(teacher);
		gameCollaborator.setOwner(true);
		gameCollaborator.setAccepted(true);
		
		gameCollaboratorRepo.save(gameCollaborator);
	}
	
	public boolean inviteTeacher(long gid,String teacherId )
	{
		
		Teacher teacher = teacherRepoService.getTeacher(teacherId);
		GameCollaborator gameCollaborator = new GameCollaborator();
		boolean found = false;
		
		if(teacher != null)
		{
			Game game = new Game(gid);
			gameCollaborator.setGame(game);
			gameCollaborator.setTeacher(teacher);
			gameCollaborator.setOwner(false);
			gameCollaborator.setAccepted(false);
			found = true;
		}
		
		return found;
	}
	
}
