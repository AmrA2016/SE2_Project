<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<title>Edit MCQ Game | Gamezania</title>

<!-- Start Global Links -->
<!-- loading Bootstrap -->
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
<!-- End loading Bootstrap -->

<!-- Loading FontAwesome -->
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}" />
<!-- End Loading FontAwesome -->

<!-- Loading FlatUI -->
<link rel="stylesheet" th:href="@{/css/flat-ui.min.css}" />
<!-- End loading FlatUI -->

<!-- End Global Links -->

<!-- Main Style -->
<link th:href="@{/css/style.css}" rel="stylesheet" />
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
	<script type="text/javascript">
		function readURL(input, name) {
			var hash = '#';
			var filename = hash.concat(name);
			if (input.files[0]) {
				var reader = new FileReader();

				reader.onload = function(e) {
					$(filename).attr('src', e.target.result);
				}

				reader.readAsDataURL(input.files[0]);
			}
		}

		function writeData(input, name) {
			var data = document.getElementById(input).value;
			var target = name;
			target = document.getElementById(target);
			target.innerHTML = data;

		}
	</script>

	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
					aria-expanded="false">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" th:href="@{'/user/' + ${teacher_id}}">Gamezania</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
				</ul>

				<form class="navbar-form navbar-left">
					<div class="form-group">
						<input type="text" class="form-control" placeholder="Search" />
					</div>
					<button type="submit" class="btn btn-default">Submit</button>
				</form>

				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown" role="button" aria-haspopup="true"
						aria-expanded="false"><b th:text="${teacher_id}"></b> <span
							class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#">Profile</a></li>
							<li><a th:href="@{'/' + ${teacher_id} + '/ShowMyCourses'}">Courses</a></li>
							<li role="separator" class="divider"></li>
							<li><a href="/logout">Log out</a></li>
						</ul></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container-fluid -->
	</nav>

	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="courseControle">
					<h1 class="text-center" th:text="${oldGame.name}"></h1>
					<hr/>
					<form th:action="@{'/' + ${teacher_id} + '/Course/' + ${cid} + '/editMCQGame/' + ${oldGame.gid} }" th:object="${mcqGame}"  enctype="multipart/form-data" method="post">
						<div class="col-md-8">
							<div class="panel panel-default">
								<div class="panel-heading">Questions</div>
								<div class="panel-body">
									<label th:if="${NumberViolation}" class="alert alert-danger">You must enter at least 1 question</label>
									<span class="newQuestion hidden"></span> 
									<a class="pull-right btn btn-primary btn-sm newQ">Add new Question</a>
									<a class="pull-right btn btn-danger btn-sm delQ" style="margin-right:5px">Delete last Question</a>
									
									<div class="hidden" id="question1">
										<h4>Question 1</h4>
										<div class="Question">
											<div class="panel panel-default">
												<div class="panel-heading">
													<input type="text" name="questions[0]" id="question1Title" th:value="${oldGame.mcqquestions[0].question}"
													 placeholder="title" class="form-control"/>
												</div>
												<div class="panel-body">
													<div class="col-md-3">
														<input type="text" name="choices[0][0]" id="question1Choice1" th:value="${oldGame.mcqquestions[0].choice1}"
															placeholder="choice 1" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[0][1]" id="question1Choice2" th:value="${oldGame.mcqquestions[0].choice2}"
															placeholder="choice 2" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[0][2]" id="question1Choice3" th:value="${oldGame.mcqquestions[0].choice3}"
															placeholder="choice 3" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[0][3]" id="question1Choice4" th:value="${oldGame.mcqquestions[0].choice4}"
															placeholder="choice 4" class="form-control"/> <br/>
													</div>

													<div class="col-md-6">
														<span><b>Right Answer</b></span>
														<select class="form-control" id="question1Answer" name="correctAnswers[0]" th:value="${oldGame.mcqquestions[0].correct_answer}" >
															<option value="0">Choice1</option>
															<option value="1">Choice2</option>
															<option value="2">Choice3</option>
															<option value="3">Choice4</option>
														</select>
													</div>
												</div>
											</div>
										</div>
									</div>

									<div class="hidden" id="question2">
										<h4>Question 2</h4>
										<div class="Question">
											<div class="panel panel-default">
												<div class="panel-heading">
													<input type="text" name="questions[1]" id="question2Title" th:value="${oldGame.mcqquestions[1].question}"
													 placeholder="title" class="form-control"/>
												</div>
												<div class="panel-body">
													<div class="col-md-3">
														<input type="text" name="choices[1][0]" id="question2Choice1" th:value="${oldGame.mcqquestions[1].choice1}"
															placeholder="choice 1" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[1][1]" id="question2Choice2" th:value="${oldGame.mcqquestions[1].choice2}"
															placeholder="choice 2" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[1][2]" id="question2Choice3" th:value="${oldGame.mcqquestions[1].choice3}"
															placeholder="choice 3" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[1][3]" id="question2Choice4" th:value="${oldGame.mcqquestions[1].choice4}"
															placeholder="choice 4" class="form-control"/> <br/>
													</div>

													<div class="col-md-6">
														<span><b>Right Answer</b></span>
														<select class="form-control" id="question2Answer" name="correctAnswers[1]" th:value="${oldGame.mcqquestions[1].correct_answer}" >
															<option value="0">Choice1</option>
															<option value="1">Choice2</option>
															<option value="2">Choice3</option>
															<option value="3">Choice4</option>
														</select>
													</div>
												</div>
											</div>
										</div>
									</div>
									
									<div class="hidden" id="question3">
										<h4>Question 3</h4>
										<div class="Question">
											<div class="panel panel-default">
												<div class="panel-heading">
													<input type="text" name="questions[2]" id="question3Title" th:value="${oldGame.mcqquestions[2].question}"
													 placeholder="title" class="form-control"/>
												</div>
												<div class="panel-body">
													<div class="col-md-3">
														<input type="text" name="choices[2][0]" id="question3Choice1" th:value="${oldGame.mcqquestions[2].choice1}"
															placeholder="choice 1" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[2][1]" id="question3Choice2" th:value="${oldGame.mcqquestions[2].choice2}"
															placeholder="choice 2" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[2][2]" id="question3Choice3" th:value="${oldGame.mcqquestions[2].choice3}"
															placeholder="choice 3" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[2][3]" id="question3Choice4" th:value="${oldGame.mcqquestions[2].choice4}"
															placeholder="choice 4" class="form-control"/> <br/>
													</div>

													<div class="col-md-6">
														<span><b>Right Answer</b></span>
														<select class="form-control" id="question3Answer" name="correctAnswers[2]" th:value="${oldGame.mcqquestions[2].correct_answer}" >
															<option value="0">Choice1</option>
															<option value="1">Choice2</option>
															<option value="2">Choice3</option>
															<option value="3">Choice4</option>
														</select>
													</div>
												</div>
											</div>
										</div>
									</div>
									
									<div class="hidden" id="question4">
										<h4>Question 4</h4>
										<div class="Question">
											<div class="panel panel-default">
												<div class="panel-heading">
													<input type="text" name="questions[3]" id="question4Title" th:value="${oldGame.mcqquestions[3].question}"
													 placeholder="title" class="form-control"/>
												</div>
												<div class="panel-body">
													<div class="col-md-3">
														<input type="text" name="choices[3][0]" id="question4Choice1" th:value="${oldGame.mcqquestions[3].choice1}"
															placeholder="choice 1" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[3][1]" id="question4Choice2" th:value="${oldGame.mcqquestions[3].choice2}"
															placeholder="choice 2" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[3][2]" id="question4Choice3" th:value="${oldGame.mcqquestions[3].choice3}"
															placeholder="choice 3" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[3][3]" id="question4Choice4" th:value="${oldGame.mcqquestions[3].choice4}"
															placeholder="choice 4" class="form-control"/> <br/>
													</div>

													<div class="col-md-6">
														<span><b>Right Answer</b></span>
														<select class="form-control" id="question4Answer" name="correctAnswers[3]" th:value="${oldGame.mcqquestions[3].correct_answer}" >
															<option value="0">Choice1</option>
															<option value="1">Choice2</option>
															<option value="2">Choice3</option>
															<option value="3">Choice4</option>
														</select>
													</div>
												</div>
											</div>
										</div>
									</div>
									
									<div class="hidden" id="question5">
										<h4>Question 5</h4>
										<div class="Question">
											<div class="panel panel-default">
												<div class="panel-heading">
													<input type="text" name="questions[4]" id="question5Title" th:value="${oldGame.mcqquestions[4].question}"
													 placeholder="title" class="form-control"/>
												</div>
												<div class="panel-body">
													<div class="col-md-3">
														<input type="text" name="choices[4][0]" id="question5Choice1" th:value="${oldGame.mcqquestions[4].choice1}"
															placeholder="choice 1" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[4][1]" id="question5Choice2" th:value="${oldGame.mcqquestions[4].choice2}"
															placeholder="choice 2" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[4][2]" id="question5Choice3" th:value="${oldGame.mcqquestions[4].choice3}"
															placeholder="choice 3" class="form-control"/>
													</div>
													<div class="col-md-3">
														<input type="text" name="choices[4][3]" id="question5Choice4" th:value="${oldGame.mcqquestions[4].choice4}"
															placeholder="choice 4" class="form-control"/> <br/>
													</div>

													<div class="col-md-6">
														<span><b>Right Answer</b></span>
														<select class="form-control" id="question5Answer" name="correctAnswers[4]" th:value="${oldGame.mcqquestions[4].correct_answer}" >
															<option value="0">Choice1</option>
															<option value="1">Choice2</option>
															<option value="2">Choice3</option>
															<option value="3">Choice4</option>
														</select>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

							</div>
						</div>
						<div class="col-md-4">
							<div class="panel panel-default">
								<div class="panel-heading">Game Details</div>
								<div class="panel-body">
									<img src="" th:src="@{'/uploaded-images/' + ${oldGame.image}}" height="100" width="100%" id="courseImage"
										style="margin-bottom: 20px;"/>
									<div class="form-group">
										<label>Image</label> 
										<input type="FILE" name="imagefile" id="image" class="" th:value="${oldGame.image}" onchange="readURL(this,'courseImage')"/>
										<label th:if="${image_empty}" class="alert alert-danger">You must enter an image</label>
										
									</div>

									<div class="form-group">
										<label>Name</label> 
										<input type="text" name="name" id="name" class="form-control" th:value="${oldGame.name}"/>
										<label th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="alert alert-danger"></label>
										<label th:if="${Wrongname}" class="alert alert-danger">This name already exists</label>
									</div>

									<div class="form-group">
										<label>Description</label>
										<textarea class="form-control" name="description" id="disc" th:text="${oldGame.description}" ></textarea>
									</div>
									
									<div class="form-group hidden">
										<input type="number" name="numberOfQuestions" id="numOfQuestions"  th:value="${oldGame.numberOfQuestions}"
										 value="1"  class="form-control"/>
									</div>
									
									<div class="form-group pull-center">
										<input type="submit" name="submit" value="Submit" class="btn btn-success"/>
									</div>
								</div>

							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>





	<!-- Start Loading Scriptes -->
	<!-- Start Global Scriptes -->
			<script th:src="@{/js/jquery.min.js}"></script>
            <script th:src="@{/js/flat-ui.min.js}"></script>
            <script th:src="@{/js/html5shiv.js}"></script>
            <script th:src="@{/js/respond.min.js}"></script>
			<script th:src="@{/js/plugins.js}"></script>

	<!-- End Global Scriptes -->
	
	<script th:inline="javascript">
	
	$(document).ready(function(){
		QuestionNumber = [[${oldGame.numberOfQuestions}]];
		var values = [
			[[${oldGame.tfquestions[0].correct_answer}]],
			[[${oldGame.tfquestions[1].correct_answer}]],
			[[${oldGame.tfquestions[2].correct_answer}]],
			[[${oldGame.tfquestions[3].correct_answer}]],
			[[${oldGame.tfquestions[4].correct_answer}]]
		];
		var i = 0;
		for(i = 0; i!=[[${oldGame.numberOfQuestions}]];i++){
			$("#question"+(i+1)).attr("class","");
			$("#question"+(i+1)+"Answer").val(values[i]).prop('selected',true);
			$("#question"+(i+1)).children(".Question").fadeIn();
		}
	});
	</script>
</body>
</html>